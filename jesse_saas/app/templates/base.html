<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>JESSE Admin</title>
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="bg-gray-50 min-h-screen flex flex-col">
    {% if session.get('admin_logged_in') %}
    <!-- Navbar -->
    <nav class="bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-20">
        <div class="flex items-center gap-3">
            <!-- Mobile Menu Button -->
            <button onclick="document.getElementById('mobile-sidebar').classList.toggle('-translate-x-full')"
                class="md:hidden text-gray-500 hover:text-gray-700">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                    </path>
                </svg>
            </button>
            <a href="{{ url_for('admin.dashboard') }}" class="text-xl font-bold text-gray-800 tracking-tight">JESSE
                <span class="text-blue-600">SaaS</span></a>
        </div>
        <a href="{{ url_for('admin.logout') }}" class="text-sm text-gray-500 hover:text-red-600">Logout</a>
    </nav>

    <div class="flex flex-1 overflow-hidden relative">
        <!-- Mobile Sidebar Overlay (Same Content as Sidebar) -->
        <aside id="mobile-sidebar"
            class="absolute inset-y-0 left-0 w-64 bg-white border-r border-gray-200 transform -translate-x-full transition-transform duration-300 md:hidden z-30 overflow-y-auto">
            <div class="py-6 px-4 space-y-8">
                <!-- Close Button -->
                <div class="flex justify-end mb-2">
                    <button onclick="document.getElementById('mobile-sidebar').classList.add('-translate-x-full')"
                        class="text-gray-400 hover:text-gray-600">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <!-- Duplicate Content of Sidebar -->
                {% include 'admin/partials/sidebar_content.html' ignore missing %}
                <!-- Since we can't easily extract the sidebar content to a partial without modifying all files, 
                     I will duplicate the sidebar logic here for now OR use JS to clone it. 
                     Better approach: Let's just make the existing Sidebar responsive instead of duplicating. -->
            </div>
        </aside>

        <!-- Sidebar (Desktop) -->
        <aside class="w-64 bg-white border-r border-gray-200 overflow-y-auto hidden md:block">
            <div class="py-6 px-4 space-y-8">
                {% include 'admin/partials/sidebar_content.html' %}
            </div>
        </aside>

        <!-- Main Content (Scrollable) -->
        <main class="flex-1 overflow-y-auto bg-gray-50 p-6 md:p-8">
            {% with messages = get_flashed_messages() %}
            {% if messages %}
            <div class="mb-6">
                {% for message in messages %}
                <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4" role="alert">{{ message }}</div>
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}

            {% block content %}{% endblock %}
        </main>
    </div>
    {% else %}
    <!-- Login Page (No Sidebar) -->
    <main class="container mx-auto px-6 py-8">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="mb-6">
            {% for message in messages %}
            <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4" role="alert">{{ message }}</div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
        {% block login_content %}{% endblock %}
    </main>
    {% endif %}
</body>

</html>